/*
 * selectivizr v1.0.3b - (c) Keith Clark, freely distributable under the terms 
 * of the MIT license.
 */ 
(function(e){function M(e){return e.replace(m,O).replace(g,function(e,t,n){var r=n.split(",");for(var i=0,s=r.length;i<s;i++){var o=q(r[i])+A;var u=[];r[i]=o.replace(y,function(e,t,n,r,i){if(t){if(u.length>0){a.push({selector:o.substring(0,i),patches:u});u=[]}return t}else{var s=n?D(n):_(r);if(s){u.push(s);return"."+s.className}return e}})}return t+r.join(",")})}function _(e){return!x||x.test(e)?{className:B(e),applyClass:true}:null}function D(t){var r=true;var s=B(t.slice(1));var o=t.substring(0,5)==":not(";var a;var f;if(o){t=t.slice(5,-1)}var l=t.indexOf("(");if(l>-1){t=t.substring(0,l)}if(t.charAt(0)==":"){switch(t.slice(1)){case"root":r=function(e){return o?e!=n:e==n};break;case"target":if(i==8){r=function(t){var n=function(){var e=location.hash;var n=e.slice(1);return o?e==L||t.id!=n:e!=L&&t.id==n};z(e,"hashchange",function(){R(t,s,n())});return n()};break}return false;case"checked":r=function(e){if(S.test(e.type)){z(e,"propertychange",function(){if(event.propertyName=="checked"){R(e,s,e.checked!==o)}})}return e.checked!==o};break;case"disabled":o=!o;case"enabled":r=function(e){if(E.test(e.tagName)){z(e,"propertychange",function(){if(event.propertyName=="$disabled"){R(e,s,e.$disabled===o)}});u.push(e);e.$disabled=e.disabled;return e.disabled===o}return t==":enabled"?o:!o};break;case"focus":a="focus";f="blur";case"hover":if(!a){a="mouseenter";f="mouseleave"}r=function(e){z(e,o?f:a,function(){R(e,s,true)});z(e,o?a:f,function(){R(e,s,false)});return o};break;default:if(!v.test(t)){return false}break}}return{className:s,applyClass:r}}function P(){var e,t,n,r;for(var i=0;i<a.length;i++){t=a[i].selector;n=a[i].patches;r=t.replace(b,L);if(r==L||r.charAt(r.length-1)==A){r+="*"}try{e=o(r)}catch(s){j("Selector '"+t+"' threw exception '"+s+"'")}if(e){for(var u=0,f=e.length;u<f;u++){var l=e[u];var c=l.className;for(var h=0,p=n.length;h<p;h++){var d=n[h];if(!H(l,d)){if(d.applyClass&&(d.applyClass===true||d.applyClass(l)===true)){c=U(c,d.className,true)}}}l.className=c}}}}function H(e,t){return(new RegExp("(^|\\s)"+t.className+"(\\s|$)")).test(e.className)}function B(e){return c+"-"+(i==6&&l?f++:e.replace(w,function(e){return e.charCodeAt(0)}))}function j(t){if(e.console){e.console.log(t)}}function F(e){return e.replace(k,O)}function I(e){return F(e).replace(C,A)}function q(e){return I(e.replace(T,O).replace(N,O))}function R(e,t,n){var r=e.className;var i=U(r,t,n);if(i!=r){e.className=i;e.parentNode.className+=L}}function U(e,t,n){var r=RegExp("(^|\\s)"+t+"(\\s|$)");var i=r.test(e);if(n){return i?e:e+A+t}else{return i?F(e.replace(r,O)):e}}function z(e,t,n){e.attachEvent("on"+t,n)}function W(){if(e.XMLHttpRequest){return new XMLHttpRequest}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){return null}}function X(e){r.open("GET",e,false);r.send();return r.status==200?r.responseText:L}function V(e,t,n){function r(e){return e.substring(0,e.indexOf("//"))}function i(e){return e.substring(0,e.indexOf("/",8))}if(!t){t=G}if(e.substring(0,2)=="//"){e=r(t)+e}if(/^https?:\/\//i.test(e)){return!n&&i(t)!=i(e)?null:e}if(e.charAt(0)=="/"){return i(t)+e}var s=t.split(/[?#]/)[0];if(e.charAt(0)!="?"&&s.charAt(s.length-1)!="/"){s=s.substring(0,s.lastIndexOf("/")+1)}return s+e}function $(e){if(e){return X(e).replace(h,L).replace(p,function(t,n,r,i,s,o){var u=$(V(r||s,e));return o?"@media "+o+" {"+u+"}":u}).replace(d,function(t,n,r,i){r=r||L;return n?t:" url("+r+V(i,e,true)+r+") "})}return L}function J(){var e,n;for(var r=0;r<t.styleSheets.length;r++){n=t.styleSheets[r];if(n.href!=L){e=V(n.href);if(e){n.cssText=n["rawCssText"]=M($(e))}}}}function K(){P();if(u.length>0){setInterval(function(){for(var e=0,t=u.length;e<t;e++){var n=u[e];if(n.disabled!==n.$disabled){if(n.disabled){n.disabled=false;n.$disabled=true;n.disabled=true}else{n.$disabled=n.disabled}}}},250)}}function Y(e,r){var i=false,s=true,o=function(n){if(n.type=="readystatechange"&&t.readyState!="complete")return;(n.type=="load"?e:t).detachEvent("on"+n.type,o,false);if(!i&&(i=true))r.call(e,n.type||n)},u=function(){try{n.doScroll("left")}catch(e){setTimeout(u,50);return}o("poll")};if(t.readyState=="complete")r.call(e,L);else{if(t.createEventObject&&n.doScroll){try{s=!e.frameElement}catch(a){}if(s)u()}z(t,"readystatechange",o);z(e,"load",o)}}if(true)return;var t=document;var n=t.documentElement;var r=W();var i=/MSIE (\d+)/.exec(navigator.userAgent)[1];if(t.compatMode!="CSS1Compat"||i<6||i>8||!r){return}var s={NW:"*.Dom.select",MooTools:"$$",DOMAssistant:"*.$",Prototype:"$$",YAHOO:"*.util.Selector.query",Sizzle:"*",jQuery:"*",dojo:"*.query"};var o;var u=[];var a=[];var f=0;var l=true;var c="slvzr";var h=/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)\s*?/g;var p=/@import\s*(?:(?:(?:url\(\s*(['"]?)(.*)\1)\s*\))|(?:(['"])(.*)\3))\s*([^;]*);/g;var d=/(behavior\s*?:\s*)?\burl\(\s*(["']?)(?!data:)([^"')]+)\2\s*\)/g;var v=/^:(empty|(first|last|only|nth(-last)?)-(child|of-type))$/;var m=/:(:first-(?:line|letter))/g;var g=/((?:^|(?:\s*})+)(?:\s*@media[^{]+{)?)\s*([^\{]*?[\[:][^{]+)/g;var y=/([ +~>])|(:[a-z-]+(?:\(.*?\)+)?)|(\[.*?\])/g;var b=/(:not\()?:(hover|enabled|disabled|focus|checked|target|active|visited|first-line|first-letter)\)?/g;var w=/[^\w-]/g;var E=/^(INPUT|SELECT|TEXTAREA|BUTTON)$/;var S=/^(checkbox|radio)$/;var x=i>6?/[\$\^*]=(['"])\1/:null;var T=/([(\[+~])\s+/g;var N=/\s+([)\]+~])/g;var C=/\s+/g;var k=/^\s*((?:[\S\s]*\S)?)\s*$/;var L="";var A=" ";var O="$1";var Q=t.getElementsByTagName("BASE");var G=Q.length>0?Q[0].href:t.location.href;J();Y(e,function(){for(var t in s){var n,r,i=e;if(e[t]){n=s[t].replace("*",t).split(".");while((r=n.shift())&&(i=i[r])){}if(typeof i=="function"){o=i;K();return}}}});})(this)
